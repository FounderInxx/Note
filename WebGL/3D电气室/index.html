<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>3D电气室</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/index.css" />
</head>
<body>
    <div class="both-content">
        <section class="axis-content">
            <nav class="left-nav">
                <ul>
                    <li class="drag-li">
                        机箱
                    </li>
                    <li class="drag-li"></li>
                    <li class="drag-li"></li>
                    <li class="drag-li"></li>
                    <li class="drag-li"></li>
                    <li class="drag-li"></li>
                </ul>
            </nav>
            <table class="drag-grid">
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
        </section>
        <section class="three-content">
            <button id="aqq">11111111111</button>
        </section>
    </div>

<!--     <div class="info">
        <a class="title" target="_blank">
          3D 电气室消防监控
        </a>
        <a class="author">
          方正
        </a>

    </div> -->
    <script>
        var zIndex = 4;
        window.onload = function () {
            var dragList = document.getElementsByClassName('drag-li');
            for (var i = 0;i<dragList.length;i++) {
                drag(dragList[i])
            }

        document.getElementById("aqq").onclick = function(){
                        var boxList = document.getElementsByClassName('temp');
        var machineArr = [];
        var boxArr = [];
        var x;
        var y;
        var z;
            for(var i=0;i<boxList.length;i++){
            if(boxList[i].style.left>160){
                x = parseInt(boxList[i].style.left) - 160 + 5
            }else{
                x = 0 - ((parseInt(boxList[i].style.left) - 80) / 5 - 5)
            }
            boxArr.push(x);
            boxArr.push(0);
            if(boxList[i].style.top>50){
                y = 0 - (parseInt(boxList[i].style.top) - 50 + 5)
            }else{
                y = parseInt(boxList[i].style.left) + 50 - 5
            }      

            boxArr.push(y);
            machineArr.push(boxArr);
            boxArr = [];
        }
            console.log(boxArr)
        };
        }


        function drag (oDrag) {
            var disX = 0;
            var disY = 0;
            oDrag.onmousedown = function (e) {
                var e = e || window.event;
                disX = e.clientX - this.offsetLeft;
                disY = e.clientY - this.offsetTop;
                var oTemp = document.createElement('div');
                oTemp.className = 'temp';
                oTemp.style.left = this.currentStyle ? this.currentStyle['left'] : getComputedStyle(this,null)['left'];
                oTemp.style.top = this.currentStyle ? this.currentStyle['top'] : getComputedStyle(this,null)['top'];
                oTemp.style.zIndex = zIndex++;
                document.body.appendChild(oTemp);
                document.onmousemove = function (e) {
                    var e = e || window.event;
                    var iL = e.clientX - disX;
                    var iT = e.clientY - disY;
                    var maxL = document.documentElement.clientWidth - oDrag.offsetWidth;
                    var maxT = document.documentElement.clientHeight - oDrag.offsetHeight;
                    iL <=0 && (iL = 0);
                    iT <= 0 && (iT = 0);
                    iL >= maxL && (iL = maxL);
                    iT >= maxT && (iT = maxT);
                    oTemp.style.left = iL + 'px';
                    oTemp.style.top = iT + 'px';
                    return false
                }
                document.onmouseup = function () {
                    document.onmousemove = null;
                    document.onmouseup = null;
                    // oDrag.style.left = oTemp.style.left;
                    // oDrag.style.top = oTemp.style.top;
                    // oDrag.style.zIndex = oTemp.style.zIndex;
                    //document.body.removeChild(oTemp);
                    oDrag.releaseCapture && oDrag.releaseCapture();
                }
                this.setCapture && this.setCapture();
                return false


            }

        }
    </script>
    <script src="./js/libs/three.min.js"></script>
    <!-- <script src="./js/libs/DragControls.js"></script> -->
    <!-- <script src="./js/libs/TrackballControls.js"></script> -->
    <script src="./js/libs/d3-threeD.js"></script>
    <script src="./js/libs/OrbitControls.js"></script>
    <script src="./js/libs/ThreeBSP.js"></script>
    <script src="./js/libs/dat.gui.min.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/textures.js"></script>
    <script src="./js/martix.js"></script>
</body>
</html>